<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Exercise 15</title>
  <script src="bundle.js" defer></script>
</head>
<body>

<h2>Add a person</h2>
<form id="new-person-form">
  <div>
    <label for="first-name">First Name:</label>
    <input type="text" id="first-name">
  </div>
  <div>
    <label for="last-name">Last Name:</label>
    <input type="text" id="last-name">
  </div>
  <div>
    <label for="birth-date">Birth Date (YYYY-MM-DD):</label>
    <input type="text" id="birth-date">
  </div>
  <div>
    <label>Gender: </label>
    <input type="radio" id="gender-female" name="gender" value="female" checked>
    <label for="gender-female">Female</label>
    <input type="radio" id="gender-male" name="gender" value="male">
    <label for="gender-male">Male</label>
  </div>
  <div>
    <button type="submit" id="submit-button">Add a person</button>
  </div>
</form>

<script>
  const form = document.getElementById( 'new-person-form' );
  const button = document.getElementById( 'submit-button' );
  const firstNameField = document.getElementById( 'first-name' );
  const lastNameField = document.getElementById( 'last-name' );
  const birthDateField = document.getElementById( 'birth-date' );

  let isValidDate = false;

  function validateDate( value ) {
    const [ fullMatch, year, month, day ] = /(\d{4})-(\d\d)-(\d\d)/.exec(
      value );
    return fullMatch.length > 0 &&
           year > 1915 &&
           year < 2018 &&
           month > 0 &&
           month < 13 &&
           day > 0 &&
           day < 31;
  }

  form.addEventListener( 'submit', event => {
    if ( !isValidDate ) {
      console.log( 'The birth date is not valid. Please re-enter.' );
      event.preventDefault();
      return false;
    } else {
      console.log(
        'The form is valid. But we are not submitting it so you do not lose state!' );
      event.preventDefault();
      return false;
    }
  } );

  birthDateField.addEventListener( 'change', event => {
    isValidDate = validateDate( event.target.value );
  } );

  firstNameField.addEventListener( 'click',
    () => console.log( 'You clicked in the ' +
                       'first name field.' ) );
  lastNameField.addEventListener( 'click',
    () => console.log( 'You clicked in the ' +
                       'last name field.' ) );
</script>
</body>
</html>